---
import TagBadge from './TagBadge.astro';
import { formatDate, getSlugFromId } from '@/lib/blog';
import type { BlogPost } from '@/lib/blog';

interface Props {
  post: BlogPost;
}

const { post } = Astro.props;
const slug = getSlugFromId(post.id);
---

<article class="border border-border rounded-lg p-6 hover:border-primary transition-colors">
  <a href={`/blog/${slug}`} class="block" data-analytics={`blog-card-${slug}`}>
    <h2 class="text-xl font-semibold mb-2 hover:text-primary transition-colors">
      {post.data.title}
    </h2>
    <p class="text-muted-foreground mb-4 line-clamp-2">
      {post.data.abstract}
    </p>
    <div class="flex flex-wrap gap-2 mb-4">
      {post.data.tags.slice(0, 4).map((tag) => <TagBadge tag={tag} />)}
    </div>
    <time class="text-sm text-muted-foreground">
      {formatDate(post.data.publishedAt)}
    </time>
  </a>
</article>
