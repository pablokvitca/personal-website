---
import { parseTag, formatTagValue } from '@/lib/tags';

interface Props {
  tag: string;
  size?: 'sm' | 'md';
}

const { tag, size = 'sm' } = Astro.props;
const parsed = parseTag(tag);

const typeColors: Record<string, string> = {
  technology: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',
  topic: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',
  language: 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200',
};

const sizeClasses = {
  sm: 'text-xs px-2 py-0.5',
  md: 'text-sm px-3 py-1',
};

const colorClass = parsed ? typeColors[parsed.type] : 'bg-gray-100 text-gray-800';
---

{
  parsed && (
    <span
      class:list={[
        'inline-flex items-center rounded-full font-medium',
        colorClass,
        sizeClasses[size],
      ]}
    >
      {formatTagValue(parsed.value)}
    </span>
  )
}
