---
import BaseLayout from '@/layouts/BaseLayout.astro';
import BlogList from '@/components/blog/BlogList.astro';
import ProjectList from '@/components/projects/ProjectList.astro';
import { getFeaturedBlogPosts } from '@/lib/blog';
import { getCollection } from 'astro:content';

export const prerender = true;

const featuredPosts = await getFeaturedBlogPosts();
const featuredProjects = await getCollection(
  'projects',
  ({ data }) => data.featured
);
---

<BaseLayout
  title="Pablo Kvitca - Software Engineer"
  description="Personal website of Pablo Kvitca. Software engineer, writer, and builder."
>
  <!-- Hero Section -->
  <section class="py-12 md:py-20">
    <h1 class="text-4xl md:text-5xl font-bold mb-4">
      Hi, I'm Pablo Kvitca
    </h1>
    <p class="text-xl text-muted-foreground max-w-2xl mb-6">
      Software engineer passionate about building great products.
      I write about technology, software development, and more.
    </p>
    <div class="flex gap-4">
      <a
        href="https://linkedin.com/in/pablokvitca"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors"
      >
        Connect on LinkedIn
      </a>
      <a
        href="/about"
        class="inline-flex items-center px-4 py-2 border border-border rounded-md hover:bg-accent transition-colors"
      >
        Learn More
      </a>
    </div>
  </section>

  <!-- Featured Blog Posts -->
  {
    featuredPosts.length > 0 && (
      <section class="py-12">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-2xl font-bold">Featured Posts</h2>
          <a
            href="/blog"
            class="text-sm text-primary hover:underline"
          >
            View all posts →
          </a>
        </div>
        <BlogList posts={featuredPosts.slice(0, 4)} showEmpty={false} />
      </section>
    )
  }

  <!-- Featured Projects -->
  {
    featuredProjects.length > 0 && (
      <section class="py-12">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-2xl font-bold">Featured Projects</h2>
          <a
            href="/projects"
            class="text-sm text-primary hover:underline"
          >
            View all projects →
          </a>
        </div>
        <ProjectList projects={featuredProjects.slice(0, 4)} showEmpty={false} />
      </section>
    )
  }
</BaseLayout>
